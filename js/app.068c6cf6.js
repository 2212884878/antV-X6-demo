(function(e){function t(t){for(var a,i,s=t[0],l=t[1],c=t[2],u=0,f=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/antV-X6-demo/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"3ae8":function(e,t,n){"use strict";var a=n("6186"),o=n.n(a);o.a},"51f0":function(e,t,n){"use strict";var a=n("5973"),o=n.n(a);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("editor-com")],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor-com"},[n("div",{staticClass:"tool-bar"},[n("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){e.scaleView(t,"up")}}}),n("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){e.scaleView(t,"down")}}}),n("i",{staticClass:"el-icon-delete",on:{click:e.delNode}}),n("i",{staticClass:"el-icon-back",on:{click:e.undo}}),n("i",{staticClass:"el-icon-right",on:{click:e.redo}})]),n("div",{staticClass:"editor-left"},e._l(e.list,(function(t,a){return n("li",{key:a,staticClass:"list"},[n("div",{staticClass:"list-item",class:t.classStr,attrs:{draggable:"",nodeType:t.nodeType},on:{dragstart:e.dragstart}},[e._v(" "+e._s(t.name)+" ")])])})),0),n("div",{staticClass:"editor-section",on:{drop:e.drop}},[n("div",{ref:"x6Editor",staticClass:"x6-editor-container"})]),e._t("rightPane",[n("modal",{attrs:{show:e.showAttrConfig,title:"属性配置"},on:{"update:show":function(t){e.showAttrConfig=t}},nativeOn:{keyup:function(e){e.stopPropagation()}}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("el-form",{attrs:{model:e.nodeFrmData,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{model:{value:e.nodeFrmData.name,callback:function(t){e.$set(e.nodeFrmData,"name",t)},expression:"nodeFrmData.name"}})],1),n("el-form-item",{attrs:{label:"属性1",prop:"属性1"}},[n("el-input",{model:{value:e.nodeFrmData.属性1,callback:function(t){e.$set(e.nodeFrmData,"属性1",t)},expression:"nodeFrmData.属性1"}})],1),n("el-form-item",{attrs:{label:"属性2",prop:"属性2"}},[n("el-input",{model:{value:e.nodeFrmData.属性2,callback:function(t){e.$set(e.nodeFrmData,"属性2",t)},expression:"nodeFrmData.属性2"}})],1)],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.close}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)])])],2)},s=[],l=(n("b0c0"),n("b680"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal"}},[e.show?n("div",{staticClass:"cus-modal"},[n("div",{staticClass:"close",on:{click:e.close}},[n("i",{staticClass:"el-icon-close"})]),n("div",{staticClass:"header"},[e._t("header",[e._v(e._s(e.title))])],2),n("div",{staticClass:"content"},[e._t("content")],2),n("div",{staticClass:"footer"},[e._t("footer")],2)]):e._e()])}),c=[],d={props:{show:{required:!0,type:Boolean,default:function(){return!1}},title:String},methods:{close:function(){this.$emit("update:show",!1)}}},u=d,f=(n("51f0"),n("2877")),p=Object(f["a"])(u,l,c,!1,null,"23fadab8",null),h=p.exports,m=n("5728"),g={data:function(){return{showAttrConfig:!1,nodeFrmData:{},initScale:1,viewTranslate:{graphX:0,graphY:0},list:[{name:"节点2",icon:"节点2",classStr:"outer",nodeType:"2"},{name:"节点1",icon:"节点1",nodeType:"1"},{name:"节点3",icon:"节点3",classStr:"circular",nodeType:"3"}]}},components:{Modal:h},beforeDestroy:function(){},mounted:function(){var e=this,t=this.$refs.x6Editor;t.addEventListener("dragover",(function(e){e.preventDefault()}));var n=new m["a"](t,{keyboard:{enabled:!0,global:!0,escape:!0},nodeStyle:{resizable:!1,strokeWidth:1},folding:{enabled:!1},connection:{enabled:!0},edgeStyle:{edge:"orth",endArrow:"classic",curved:!0,fontSize:16,movable:!1},guide:{enabled:!0,dashed:!0,stroke:"#555555"},getAnchors:function(e){return null!=e&&e.isNode()?[[.25,0],[.5,0],[.75,0],[.25,1],[.5,1],[.75,1]]:null}}),a=m["b"].create(n);this.undoManager=a,window.undoManager=a,n.bindKey(["del","backspace"],(function(t){e.delNode()}),"keyup"),n.bindKey(["ctrl+z"],(function(t){e.undo()}),"keyup"),n.bindKey(["ctrl+plus"],(function(t){return e.scaleView(t,"up")})),n.bindKey(["ctrl+-"],(function(t){return e.scaleView(t,"down")})),n.on("selection:changed",(function(e){console.log("graph up",e)})),n.on("mouseEvent",(function(t){var a=t.e;switch(t.eventName){case"mouseDown":e.mouseDownMoveFlag=!a.state,e.mouseDownPos=a;break;case"mouseUp":e.mouseDownMoveFlag=!1,e.viewTranslate=Object.assign({},e.viewOffset);break;case"mouseMove":if(e.mouseDownMoveFlag){var o=e.viewTranslate,r=a.graphX-e.mouseDownPos.graphX+o.graphX||0,i=a.graphY-e.mouseDownPos.graphY+o.graphY||0;e.viewOffset={graphX:r,graphY:i},n.getView().setTranslate(r,i)}break;default:break}})),n.on("click",(function(t){var n=t.cell;n?(e.showAttrConfig=!0,e.nodeFrmData=Object.assign(n.data||{},{isNode:n._isNode,isEdge:n._isEdge})):e.showAttrConfig=!1})),this.graph=n,window.graph=n,window.UndoManager=m["b"]},methods:{delNode:function(){this.graph.deleteCells(),this.showAttrConfig=!1},undo:function(){undoManager.undo()},redo:function(){undoManager.redo()},dragstart:function(e){var t=e.target,n={nodeType:t.getAttribute("nodeType"),name:t.innerText};e.dataTransfer.setData("data",JSON.stringify(n))},drop:function(e){this.createNode(e)},createNode:function(e){var t=JSON.parse(e.dataTransfer.getData("data")),n=this.$refs.x6Editor,a=n.getBoundingClientRect(),o={},r={width:120,height:60,data:t};switch(t.nodeType){case"1":o=Object.assign(r,{strokeOpacity:1,shape:"html",html:'<div class="default">\n                      <span attr="name">'.concat(t.name,"</div>\n                  </div>")});break;case"2":o=Object.assign(r,{label:!1,shape:"html",html:'<div class="outer">\n                      <span class="inner" attr="name">'.concat(t.name,"</span>\n                  </div>")});break;case"3":o=Object.assign(r,{width:80,height:80,label:!1,perimeter:"ellipse",strokeOpacity:.01,shape:"html",html:'<div class="circular">\n                     <span attr="name">'.concat(t.name,"</span>\n                  </div>")});break;default:break}var i=e.x-a.left,s=e.y-a.top;if(!(i<0||s<0)){var l=graph.getView().translate,c=graph.getView().getScale().toFixed(1);o.x=i/c-o.width/2-l.x,o.y=s/c-o.height/2-l.y,console.log(o);this.graph.addNode(o)}},scaleView:function(e,t){e.preventDefault(),"up"===t?this.initScale+=.1:this.initScale-=.1,graph.getView().setScale(this.initScale)},close:function(){this.showAttrConfig=!1},confirm:function(){var e=this.graph,t=e.getSelectedCell();t.setData(this.nodeFrmData);var n=t.style;if("html"===t.style.shape){t.style.html;var a=document.createElement("div");a.innerHTML=n.html,a.querySelector('[attr="name"]').innerText=this.nodeFrmData.name,n.html=a.innerHTML,t.setStyle(n)}else t.style.label=this.nodeFrmData.name;e.refresh(t),this.showAttrConfig=!1}}},v=g,b=(n("3ae8"),Object(f["a"])(v,i,s,!1,null,null,null)),w=b.exports,y={name:"App",components:{EditorCom:w}},k=y,C=(n("5c0b"),Object(f["a"])(k,o,r,!1,null,null,null)),D=C.exports,O=n("5c96"),_=n.n(O);n("0fae");a["default"].use(_.a),a["default"].config.productionTip=!1,new a["default"]({render:function(e){return e(D)}}).$mount("#app")},5973:function(e,t,n){},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),o=n.n(a);o.a},6186:function(e,t,n){},"9c0c":function(e,t,n){}});
//# sourceMappingURL=app.068c6cf6.js.map